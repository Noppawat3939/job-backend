generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int      @id @default(autoincrement())
  email          String
  password       String
  role           Role
  active         Boolean?
  firstName      String?
  lastName       String?
  companyName    String?
  industry       String?
  companyProfile String?
  companyHistory String?

  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  AppliedJob  AppliedJob[]
  FavoriteJob FavoriteJob[]
}

model Job {
  id              Int              @id @default(autoincrement())
  active          Boolean?
  position        String
  style           WorkStyle?
  company         String
  industry        String?
  companyProfile  String?
  location        String?
  salary          Int[]
  urgent          Boolean?         @default(false)
  jobDescriptions String[]
  qualifications  String[]
  benefits        String[]
  contracts       String[]
  transports      String[]
  jobStartTime    DateTime?
  jobEndTime      DateTime?
  jobType         JobType?
  province        String?
  category        String?
  experienceLevel ExperienceLevel?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  AppliedJob  AppliedJob[]
  FavoriteJob FavoriteJob[]

  @@map("job")
}

model AppliedJob {
  id     Int  @id @default(autoincrement())
  userId Int
  jobId  Int
  user   User @relation(fields: [userId], references: [id])
  job    Job  @relation(fields: [jobId], references: [id])

  applicationDate   DateTime?
  cancelledDate     DateTime?
  rejectedDate      DateTime?
  applicationStatus ApplicationStatus?
}

model FavoriteJob {
  id     Int @id @default(autoincrement())
  userId Int
  jobId  Int

  user         User      @relation(fields: [userId], references: [id])
  job          Job       @relation(fields: [jobId], references: [id])
  favoriteDate DateTime?
}

enum WorkStyle {
  remote
  work_from_home
  on_site
  hybrid
}

enum Role {
  super_admin
  admin
  employer
  user
}

enum JobType {
  full_time
  past_time
  contract
  internship
}

enum ExperienceLevel {
  entry
  middle
  senior
  no_required
}

enum ApplicationStatus {
  applied
  reviewing
  interviewing
  offering
  offered
  rejected
  cancelled
}
